{"ast":null,"code":"import { SET_SEMESTER_OPTIONS, CALCULATE_CAP, CLEAN_UP_CAP, SET_CAP } from \"../actions/types\";\nimport generateObject from \"../utils/commonFunctions\";\nconst initialState = {\n  cap: 5,\n  targetCap: 5,\n  semesterOptions: []\n};\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case SET_SEMESTER_OPTIONS:\n      // let sem1;\n      // let sem2;\n      // let semesterOptions = [];\n      // for(let i = 1; i < (action.payload * 2); i += 2) {\n      //     const year = Math.ceil(i / 2);\n      //     sem1 = `Year ${year} Semester 1`;\n      //     sem2 = `Year ${year} Semester 2`;\n      //     semesterOptions[i - 1] = sem1;\n      //     semesterOptions[i] = sem2;\n      // }\n      const {\n        matYear,\n        gradYear\n      } = action;\n      let semesterOptions = generateObject(matYear, gradYear, \"semesterOptions\");\n      return { ...state,\n        semesterOptions: semesterOptions\n      };\n\n    case CALCULATE_CAP:\n      let totalMC = 0;\n      let totalGradePoint = 0;\n      let totalTargetMC = 0;\n      let totalTargetGradePoint = 0;\n\n      for (let i = 0; i < action.payload.length; i++) {\n        const module = action.payload[i];\n        const MC = Number(module.moduleCredit);\n\n        if (module.grade && !module.SU) {\n          totalGradePoint += module.gradePoint * MC;\n          totalMC += MC;\n          totalTargetGradePoint += module.gradePoint * MC;\n          totalTargetMC += MC;\n        } else if (module.targetGrade) {\n          totalTargetGradePoint += module.gradePoint * MC;\n          totalTargetMC += MC;\n        }\n      }\n\n      const cap = totalMC === 0 ? 5 : totalGradePoint / totalMC;\n      const roundedCap = Math.round((cap + Number.EPSILON) * 100) / 100;\n      const targetCap = totalTargetMC === 0 ? 5 : totalTargetGradePoint / totalTargetMC;\n      const roundedTargetCap = Math.round((targetCap + Number.EPSILON) * 100) / 100;\n      return { ...state,\n        cap: roundedCap,\n        targetCap: roundedTargetCap\n      };\n\n    case SET_CAP:\n      return { ...state,\n        cap: action.cap,\n        targetCap: action.targetCap\n      };\n\n    case CLEAN_UP_CAP:\n      return initialState;\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/frisciliasultan/Documents/Orbitalhosting/src/reducers/capReducer.js"],"names":["SET_SEMESTER_OPTIONS","CALCULATE_CAP","CLEAN_UP_CAP","SET_CAP","generateObject","initialState","cap","targetCap","semesterOptions","state","action","type","matYear","gradYear","totalMC","totalGradePoint","totalTargetMC","totalTargetGradePoint","i","payload","length","module","MC","Number","moduleCredit","grade","SU","gradePoint","targetGrade","roundedCap","Math","round","EPSILON","roundedTargetCap"],"mappings":"AAAA,SACIA,oBADJ,EAEIC,aAFJ,EAGIC,YAHJ,EAIIC,OAJJ,QAKO,kBALP;AAMA,OAAQC,cAAR,MAA6B,0BAA7B;AAEA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,GAAG,EAAE,CADY;AAEjBC,EAAAA,SAAS,EAAE,CAFM;AAGjBC,EAAAA,eAAe,EAAE;AAHA,CAArB;AAMA,eAAe,UAASC,KAAK,GAAGJ,YAAjB,EAA+BK,MAA/B,EAAuC;AAClD,UAAQA,MAAM,CAACC,IAAf;AACI,SAAKX,oBAAL;AACI;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,YAAM;AAAEY,QAAAA,OAAF;AAAWC,QAAAA;AAAX,UAAwBH,MAA9B;AACA,UAAIF,eAAe,GAAGJ,cAAc,CAACQ,OAAD,EAAUC,QAAV,EAAoB,iBAApB,CAApC;AAEA,aAAO,EACH,GAAGJ,KADA;AAEHD,QAAAA,eAAe,EAAEA;AAFd,OAAP;;AAKJ,SAAKP,aAAL;AACI,UAAIa,OAAO,GAAG,CAAd;AACA,UAAIC,eAAe,GAAG,CAAtB;AACA,UAAIC,aAAa,GAAG,CAApB;AACA,UAAIC,qBAAqB,GAAG,CAA5B;;AAEA,WAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGR,MAAM,CAACS,OAAP,CAAeC,MAAlC,EAA0CF,CAAC,EAA3C,EAAgD;AAC5C,cAAMG,MAAM,GAAGX,MAAM,CAACS,OAAP,CAAeD,CAAf,CAAf;AACA,cAAMI,EAAE,GAAGC,MAAM,CAACF,MAAM,CAACG,YAAR,CAAjB;;AACA,YAAGH,MAAM,CAACI,KAAP,IAAgB,CAACJ,MAAM,CAACK,EAA3B,EAA+B;AAC3BX,UAAAA,eAAe,IAAKM,MAAM,CAACM,UAAP,GAAoBL,EAAxC;AACAR,UAAAA,OAAO,IAAIQ,EAAX;AACAL,UAAAA,qBAAqB,IAAKI,MAAM,CAACM,UAAP,GAAoBL,EAA9C;AACAN,UAAAA,aAAa,IAAIM,EAAjB;AACH,SALD,MAKO,IAAID,MAAM,CAACO,WAAX,EAAwB;AAC3BX,UAAAA,qBAAqB,IAAKI,MAAM,CAACM,UAAP,GAAoBL,EAA9C;AACAN,UAAAA,aAAa,IAAIM,EAAjB;AAEH;AACJ;;AAED,YAAMhB,GAAG,GAAGQ,OAAO,KAAK,CAAZ,GAAgB,CAAhB,GAAoBC,eAAe,GAAGD,OAAlD;AACA,YAAMe,UAAU,GAAGC,IAAI,CAACC,KAAL,CAAW,CAACzB,GAAG,GAAGiB,MAAM,CAACS,OAAd,IAAyB,GAApC,IAA2C,GAA9D;AACA,YAAMzB,SAAS,GAAGS,aAAa,KAAK,CAAlB,GAAsB,CAAtB,GAA0BC,qBAAqB,GAAGD,aAApE;AACA,YAAMiB,gBAAgB,GAAGH,IAAI,CAACC,KAAL,CAAW,CAACxB,SAAS,GAAGgB,MAAM,CAACS,OAApB,IAA+B,GAA1C,IAAiD,GAA1E;AAEA,aAAO,EACH,GAAGvB,KADA;AAEHH,QAAAA,GAAG,EAAEuB,UAFF;AAGHtB,QAAAA,SAAS,EAAE0B;AAHR,OAAP;;AAMJ,SAAK9B,OAAL;AACI,aAAO,EACH,GAAGM,KADA;AAEHH,QAAAA,GAAG,EAAEI,MAAM,CAACJ,GAFT;AAGHC,QAAAA,SAAS,EAAEG,MAAM,CAACH;AAHf,OAAP;;AAMJ,SAAKL,YAAL;AACI,aAAOG,YAAP;;AAEJ;AACI,aAAOI,KAAP;AAjER;AAmEH","sourcesContent":["import {\n    SET_SEMESTER_OPTIONS,\n    CALCULATE_CAP,\n    CLEAN_UP_CAP,\n    SET_CAP\n} from \"../actions/types\";\nimport  generateObject  from \"../utils/commonFunctions\";\n\nconst initialState = {\n    cap: 5,\n    targetCap: 5,\n    semesterOptions: []\n};\n\nexport default function(state = initialState, action) {\n    switch (action.type) {\n        case SET_SEMESTER_OPTIONS: \n            // let sem1;\n            // let sem2;\n            // let semesterOptions = [];\n\n            // for(let i = 1; i < (action.payload * 2); i += 2) {\n            //     const year = Math.ceil(i / 2);\n            //     sem1 = `Year ${year} Semester 1`;\n            //     sem2 = `Year ${year} Semester 2`;\n            //     semesterOptions[i - 1] = sem1;\n            //     semesterOptions[i] = sem2;\n            // }\n\n            const { matYear, gradYear } = action;\n            let semesterOptions = generateObject(matYear, gradYear, \"semesterOptions\");\n\n            return {\n                ...state,\n                semesterOptions: semesterOptions\n            }\n        \n        case CALCULATE_CAP:\n            let totalMC = 0;\n            let totalGradePoint = 0;\n            let totalTargetMC = 0;\n            let totalTargetGradePoint = 0;\n\n            for(let i = 0; i < action.payload.length; i ++) {\n                const module = action.payload[i];\n                const MC = Number(module.moduleCredit);\n                if(module.grade && !module.SU) {\n                    totalGradePoint += (module.gradePoint * MC);\n                    totalMC += MC;\n                    totalTargetGradePoint += (module.gradePoint * MC);\n                    totalTargetMC += MC;\n                } else if (module.targetGrade) {\n                    totalTargetGradePoint += (module.gradePoint * MC);\n                    totalTargetMC += MC;\n                   \n                }\n            }\n          \n            const cap = totalMC === 0 ? 5 : totalGradePoint / totalMC;\n            const roundedCap = Math.round((cap + Number.EPSILON) * 100) / 100;\n            const targetCap = totalTargetMC === 0 ? 5 : totalTargetGradePoint / totalTargetMC;\n            const roundedTargetCap = Math.round((targetCap + Number.EPSILON) * 100) / 100;\n\n            return {\n                ...state,\n                cap: roundedCap,\n                targetCap: roundedTargetCap\n            }\n    \n        case SET_CAP:\n            return {\n                ...state,\n                cap: action.cap,\n                targetCap: action.targetCap\n            }\n\n        case CLEAN_UP_CAP:\n            return initialState;\n\n        default: \n            return state;\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}