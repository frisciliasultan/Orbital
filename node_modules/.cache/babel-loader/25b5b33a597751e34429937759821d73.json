{"ast":null,"code":"var _jsxFileName = \"/Users/frisciliasultan/Documents/Orbital/client/src/Settings/AcadSettings.jsx\";\nimport React, { useState, useEffect, useReducer } from 'react';\nimport { Options } from '../Pages/Module Selection Page/ModuleList';\nimport { Link } from 'react-router-dom';\nimport axios from \"axios\";\nimport { Button } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport PropTypes from \"prop-types\";\nimport { updateSettings, setMatriculationYearOptions, setTargetGradYearOptions } from \"../actions/settingsActions\";\nimport { deleteUser } from \"../actions/authActions\";\nimport isEmpty from \"is-empty\";\nimport { generateOptions } from '../utils/commonFunctions';\n\nconst AcadSettings = props => {\n  const [userInput, setUserInput] = useReducer((state, newState) => ({ ...state,\n    ...newState\n  }), {\n    faculty: props.userInfo.faculty,\n    facIndex: null,\n    major: props.userInfo.major,\n    majorIndex: null,\n    specialisation: props.userInfo.specialisation,\n    residence: props.userInfo.residential,\n    matriculationYear: props.userInfo.matriculationYear,\n    targetGradYear: props.userInfo.matriculationYear\n  }); // const [faculty, setFaculty] = useState(this.props.userInfo.faculty);\n  // const [major, setMajor] = useState(this.props.userInfo.major);\n  // const [specialisation, setSpecialisation] = useState(this.props.userInfo.specialisation);\n  // const [residence, setResidence] = useState(this.props.userInfo.residential);\n  // const [matriculationYear, setMatriculationYear] = useState(this.props.userInfo.matriculationYear);\n  // const [targetGradYear, setTargetGradYear] = useState(this.props.userInfo.targetGradYear);\n\n  const residenceOptions = ['N/A', 'CAPT', 'RC4', 'RVRC', 'Tembusu', 'USP'];\n  const dummyfac = [{\n    'Business': [{\n      'Business Administration': ['A', 'B']\n    }, {\n      'Accountancy': ['C', 'D']\n    }]\n  }, {\n    'FASS': [{\n      'C': ['N/A']\n    }, {\n      'D': ['N/A']\n    }]\n  }, {\n    'Computing': [{\n      'Computer Science': ['N/A']\n    }, {\n      'Business Analytics': ['N/A']\n    }]\n  }];\n  useEffect(() => {\n    if (isEmpty(props.settings.matriculationOptions)) {\n      props.setMatriculationYearOptions(props.settings.currentAY, props.settings.currentSemester);\n      props.setTargetGradYearOptions(props.settings.currentAY, props.settings.currentSemester);\n    }\n  }, [props.settings.userInfo]);\n\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      selectedIndex\n    } = e.target;\n\n    if (name === \"faculty\") {\n      setUserInput({\n        [name]: value,\n        facIndex: selectedIndex - 1,\n        major: null\n      });\n    } else if (name === \"major\") {\n      setUserInput({\n        [name]: value\n      });\n      setUserInput({\n        majorIndex: selectedIndex - 1\n      });\n    } else {\n      setUserInput({\n        [name]: value\n      });\n    }\n  }; // const changeFaculty = (value, index) => {\n  //   setFaculty(value);\n  //   set\n  //     this.setState({\n  //       faculty: value,\n  //       facIndex: index,\n  //       major: null\n  //     });\n  //   }\n  // changeMajor(value, index) {\n  //   this.setState({\n  //     major: value,\n  //     majorIndex: index\n  //   });\n  // }\n  // changeSpecialisation(value) {\n  //   this.setState({\n  //     specialisation: value,\n  //   });\n  // }\n  // changeResidence(value) {\n  //   this.setState({\n  //     residence: value,\n  //   });\n  // }\n  // changeMatriculationYear(value) {\n  //   this.setState({\n  //     matriculationYear: value,\n  //   });\n  // }\n  // changeTargetGradYear(value) {\n  //   this.setState({\n  //     targetGradYear: value,\n  //   });\n  // }\n  //turn array of choices into options dropdown\n\n\n  const generateOptions = choices => {\n    let facIndex = userInput.facIndex;\n\n    if (choices === 'faculty') {\n      return dummyfac.map(obj => {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          value: Object.keys(obj),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 7\n          }\n        }, Object.keys(obj));\n      });\n    } else if (choices === 'major') {\n      if (userInput.faculty) {\n        return dummyfac[facIndex][userInput.faculty].map(obj => {\n          return /*#__PURE__*/React.createElement(\"option\", {\n            value: Object.keys(obj),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 23\n            }\n          }, Object.keys(obj));\n        });\n      }\n    } else if (choices === 'specialisation') {\n      if (userInput.major && userInput.faculty) {\n        return dummyfac[facIndex][userInput.faculty][userInput.majorIndex][userInput.major].map(item => {\n          return /*#__PURE__*/React.createElement(\"option\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 23\n            }\n          }, item);\n        });\n      }\n    } else if (choices === 'residence') {\n      return residenceOptions.map(obj => {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          value: obj,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 9\n          }\n        }, obj);\n      });\n    } else {\n      if (choices === 'matriculationYear') {\n        return props.settings.matriculationOptions.map(option => {\n          return /*#__PURE__*/React.createElement(\"option\", {\n            value: option.substr(3, 9),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 13\n            }\n          }, option);\n        });\n      } else {\n        return props.settings.targetGradOptions.map(option => {\n          return /*#__PURE__*/React.createElement(\"option\", {\n            value: option.substr(6, 9),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 15\n            }\n          }, option);\n        });\n      }\n    }\n  };\n\n  const handleSubmit = () => {\n    const userData = {\n      faculty: userInput.faculty,\n      major: userInput.major,\n      specialisation: userInput.specialisation,\n      residential: userInput.residence,\n      matriculationYear: userInput.matriculationYear,\n      targetGradYear: userInput.targetGradYear,\n      name: props.settings.userInfo.name,\n      modPlan: props.modplan\n    };\n    props.updateSettings(userData);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 9\n    }\n  }, \"Enter your particulars so that we can personalise your user experience!\"), /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 11\n    }\n  }, \"Your Faculty: \", userInput.faculty), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"faculty\",\n    onChange: handleChange,\n    value: userInput.faculty,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    selected: true,\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 17\n    }\n  }, \"Choose Your Faculty\"), generateOptions(\"faculty\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 13\n    }\n  }, \"Your Major: \", userInput.major), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"major\",\n    onChange: handleChange,\n    value: userInput.major,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }\n  }, \"(\", /*#__PURE__*/React.createElement(\"option\", {\n    selected: true,\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 18\n    }\n  }, \"Choose Your Major\"), \")\", generateOptions(\"major\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 13\n    }\n  }, \"Your Specialisation: \", userInput.specialisation, \"  \"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"specialisation\",\n    onChange: handleChange,\n    value: userInput.specialisation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }\n  }, \"(\", /*#__PURE__*/React.createElement(\"option\", {\n    selected: true,\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 18\n    }\n  }, \"Choose Your Specialisation\"), \")\", generateOptions(\"specialisation\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 13\n    }\n  }, \"Your Residential College: \", userInput.residence), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"residence\",\n    onChange: handleChange,\n    value: userInput.residence,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 13\n    }\n  }, \"(\", /*#__PURE__*/React.createElement(\"option\", {\n    selected: true,\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 18\n    }\n  }, \"Choose Your Residence\"), \")\", generateOptions(\"residence\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 13\n    }\n  }, \"Year of Matriculation: \", userInput.matriculationYear), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"matriculationYear\",\n    onChange: handleChange,\n    value: userInput.matriculationYear,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 13\n    }\n  }, \"(\", /*#__PURE__*/React.createElement(\"option\", {\n    selected: true,\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 18\n    }\n  }, \"Choose Your Year of Matriculation\"), \")\", generateOptions(\"matriculationYear\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 13\n    }\n  }, \"Target Graduation Year: \", userInput.targetGradYear), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"targetGradYear\",\n    onChange: handleChange,\n    value: userInput.targetGradYear,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }\n  }, \"(\", /*#__PURE__*/React.createElement(\"option\", {\n    selected: true,\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 18\n    }\n  }, \"Choose Your Target Graduation Year\"), \")\", generateOptions(\"targetGradYear\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    className: \"button\",\n    onClick: () => handleSubmit(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 9\n    }\n  }, \"Save Settings\"), /*#__PURE__*/React.createElement(Button, {\n    className: \"button\",\n    id: \"delete\",\n    onClick: () => props.deleteUser(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 9\n    }\n  }, \"Delete Account\"));\n};\n\nAcadSettings.propTypes = {\n  updateSettings: PropTypes.func.isRequired,\n  setMatriculationYearOptions: PropTypes.func.isRequired,\n  setTargetGradYearOptions: PropTypes.func.isRequired,\n  deleteUser: PropTypes.func.isRequired,\n  modplan: PropTypes.object.isRequired,\n  settings: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  modplan: state.modplan.selectedModules,\n  settings: state.settings,\n  userInfo: state.settings.userInfo\n});\n\nexport default connect(mapStateToProps, {\n  updateSettings,\n  setMatriculationYearOptions,\n  setTargetGradYearOptions,\n  deleteUser\n})(AcadSettings);","map":{"version":3,"sources":["/Users/frisciliasultan/Documents/Orbital/client/src/Settings/AcadSettings.jsx"],"names":["React","useState","useEffect","useReducer","Options","Link","axios","Button","connect","PropTypes","updateSettings","setMatriculationYearOptions","setTargetGradYearOptions","deleteUser","isEmpty","generateOptions","AcadSettings","props","userInput","setUserInput","state","newState","faculty","userInfo","facIndex","major","majorIndex","specialisation","residence","residential","matriculationYear","targetGradYear","residenceOptions","dummyfac","settings","matriculationOptions","currentAY","currentSemester","handleChange","e","name","value","selectedIndex","target","choices","map","obj","Object","keys","item","option","substr","targetGradOptions","handleSubmit","userData","modPlan","modplan","propTypes","func","isRequired","object","mapStateToProps","selectedModules"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useReducer} from 'react';\nimport { Options } from '../Pages/Module Selection Page/ModuleList';\nimport { Link } from 'react-router-dom';\nimport axios from \"axios\";\nimport { Button } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport PropTypes from \"prop-types\";\nimport { updateSettings, setMatriculationYearOptions, setTargetGradYearOptions } from \"../actions/settingsActions\";\nimport { deleteUser } from \"../actions/authActions\";\nimport isEmpty from \"is-empty\";\nimport { generateOptions } from '../utils/commonFunctions';\n\n\n\nconst AcadSettings = (props) => {\n  const [userInput, setUserInput] = useReducer(\n    (state, newState) => ({...state, ...newState}), \n    {\n      faculty: props.userInfo.faculty,\n      facIndex: null,\n      major: props.userInfo.major,\n      majorIndex: null,\n      specialisation: props.userInfo.specialisation,\n      residence: props.userInfo.residential,\n      matriculationYear: props.userInfo.matriculationYear,\n      targetGradYear: props.userInfo.matriculationYear\n    }\n  )\n  // const [faculty, setFaculty] = useState(this.props.userInfo.faculty);\n  // const [major, setMajor] = useState(this.props.userInfo.major);\n  // const [specialisation, setSpecialisation] = useState(this.props.userInfo.specialisation);\n  // const [residence, setResidence] = useState(this.props.userInfo.residential);\n  // const [matriculationYear, setMatriculationYear] = useState(this.props.userInfo.matriculationYear);\n  // const [targetGradYear, setTargetGradYear] = useState(this.props.userInfo.targetGradYear);\n\n  const residenceOptions = ['N/A','CAPT', 'RC4', 'RVRC','Tembusu', 'USP'];\n  const dummyfac = [{'Business': [{'Business Administration': ['A', 'B']},\n                    {'Accountancy': ['C', 'D']}]},\n                  {'FASS': [{'C': ['N/A']},\n                  {'D': ['N/A']}]},\n                  {\n                  'Computing': [\n                        {'Computer Science': ['N/A']},\n                        {'Business Analytics': ['N/A']}\n                  ] \n  }];\n\n  useEffect(() => {\n    if(isEmpty(props.settings.matriculationOptions)) {\n      props.setMatriculationYearOptions(props.settings.currentAY, props.settings.currentSemester)\n      props.setTargetGradYearOptions(props.settings.currentAY, props.settings.currentSemester)\n    } \n  }, [props.settings.userInfo]);\n\n  const handleChange = (e) => {\n    const {name, value, selectedIndex} = e.target;\n\n    if(name === \"faculty\") {\n      setUserInput({[name]: value,\n                      facIndex: (selectedIndex - 1),\n                      major: null});\n\n    } else if(name === \"major\") {\n      setUserInput({[name]: value});\n      setUserInput({majorIndex: (selectedIndex - 1)})\n\n    } else {\n      setUserInput({[name]: value});\n    } \n\n  };\n\n\n  // const changeFaculty = (value, index) => {\n  //   setFaculty(value);\n  //   set\n  //     this.setState({\n  //       faculty: value,\n  //       facIndex: index,\n  //       major: null\n  //     });\n  //   }\n\n  // changeMajor(value, index) {\n  //   this.setState({\n  //     major: value,\n  //     majorIndex: index\n  //   });\n  // }\n\n  // changeSpecialisation(value) {\n  //   this.setState({\n  //     specialisation: value,\n  //   });\n  // }\n\n  // changeResidence(value) {\n  //   this.setState({\n  //     residence: value,\n  //   });\n  // }\n\n  // changeMatriculationYear(value) {\n  //   this.setState({\n  //     matriculationYear: value,\n  //   });\n  // }\n\n  // changeTargetGradYear(value) {\n  //   this.setState({\n  //     targetGradYear: value,\n  //   });\n  // }\n\n\n //turn array of choices into options dropdown\n  const generateOptions = (choices) => {\n    let facIndex = userInput.facIndex;\n  if(choices === 'faculty'){\n    return dummyfac.map((obj) => {\n      return (\n      <option value={Object.keys(obj)}>\n        {Object.keys(obj)}\n      </option>\n      );\n    });\n  } else if(choices === 'major') {\n      if(userInput.faculty) {\n      return dummyfac\n            [facIndex]\n            [userInput.faculty].map((obj) => {\n                    return (\n                      <option value={Object.keys(obj)}>\n                        {Object.keys(obj)}\n                      </option>\n                    )\n                }\n      )}\n    } else if(choices === 'specialisation') {\n        if(userInput.major && userInput.faculty) {\n        return dummyfac\n              [facIndex]\n              [userInput.faculty][userInput.majorIndex][userInput.major].map((item) => {\n                    return (\n                      <option>\n                        {item}\n                      </option>\n                    )\n                  }    \n        )}\n    } else if(choices === 'residence') {\n      return residenceOptions.map((obj) => {\n        return (\n        <option value={obj}>\n          {obj}\n        </option>\n        );\n      });\n    } else {\n        if(choices === 'matriculationYear') {\n          return props.settings.matriculationOptions.map((option) => {\n            return (\n            <option value={option.substr(3,9)}>\n              {option}\n            </option>\n            );\n          });\n        } else {\n            return props.settings.targetGradOptions.map((option) => {\n              return (\n              <option value={option.substr(6,9)}>\n                {option}\n              </option>\n              );\n            });\n          }\n      }\n}\n\nconst handleSubmit = () => {\n  const userData = {\n    faculty: userInput.faculty,\n    major: userInput.major,\n    specialisation: userInput.specialisation,\n    residential: userInput.residence,\n    matriculationYear: userInput.matriculationYear,\n    targetGradYear: userInput.targetGradYear,\n    name: props.settings.userInfo.name,\n    modPlan: props.modplan\n  }\n\n  props.updateSettings(userData);\n}\n\n  return (\n      <div>\n        <h5>Enter your particulars so that we can personalise your user experience!</h5>\n\n        <form>\n          <label>Your Faculty: {userInput.faculty}</label>\n          <select\n              name=\"faculty\" \n              onChange={handleChange}\n              value={userInput.faculty}>\n                <option selected disabled>\n                  Choose Your Faculty\n                </option>\n              {generateOptions(\"faculty\")}\n            </select>   \n            <br/>\n            <br/>\n\n            <label>Your Major: {userInput.major}</label>\n            <select\n              name=\"major\"\n              onChange={handleChange}\n              value={userInput.major}>\n                (<option selected disabled>\n                  Choose Your Major\n                </option>)\n              {generateOptions(\"major\") }\n            </select>\n            <br/>\n            <br/>\n\n            <label>Your Specialisation: {userInput.specialisation}  </label>\n            <select\n              name=\"specialisation\"\n              onChange={handleChange}\n              value={userInput.specialisation}>\n                (<option selected disabled>\n                  Choose Your Specialisation\n                </option>)\n              {generateOptions(\"specialisation\")}\n            </select>\n            <br/>\n            <br/>\n\n            <label>Your Residential College: {userInput.residence}</label>\n            <select\n              name=\"residence\"\n              onChange={handleChange}\n              value={userInput.residence}>\n                (<option selected disabled>\n                  Choose Your Residence\n                </option>)\n              {generateOptions(\"residence\")}\n            </select>\n            <br/>\n            <br/>\n\n            <label>Year of Matriculation: {userInput.matriculationYear}</label>\n            <select\n              name=\"matriculationYear\"\n              onChange={handleChange}\n              value={userInput.matriculationYear}>\n                (<option selected disabled>\n                  Choose Your Year of Matriculation\n                </option>)\n              {generateOptions(\"matriculationYear\")}\n            </select>\n            <br/>\n            <br/>\n\n            <label>Target Graduation Year: {userInput.targetGradYear}</label>\n            <select\n              name=\"targetGradYear\"\n              onChange={handleChange}\n              value={userInput.targetGradYear}>\n                (<option selected disabled>\n                  Choose Your Target Graduation Year\n                </option>)\n              {generateOptions(\"targetGradYear\")}\n            </select>\n            <br/>\n            <br/>\n          </form>\n        {/* <Options \n          faculty={this.state.faculty}\n          major={this.state.major}\n          specialisation={this.state.specialisation}\n          residential={this.state.residence}\n          matriculationYear={this.state.matriculationYear}\n          targetGradYear={this.state.targetGradYear}\n          onFacultyChange={this.changeFaculty}\n          onMajorChange={this.changeMajor}\n          onSpecialisationChange={this.changeSpecialisation}\n          onResidenceChange={this.changeResidence}\n          onMatriculationChange={this.changeMatriculationYear}\n          onTargetGradChange={this.changeTargetGradYear}\n          facultyOptions={this.generateOptions('faculty')}\n          majorOptions={this.generateOptions('major')}\n          specialisationOptions={this.generateOptions('specialisation')}\n          residenceOptions={this.generateOptions('residence')}\n          matriculationYearOptions={this.generateOptions('matriculationYear')}\n          targetGradYearOptions={this.generateOptions('targetGradYear')}\n        /> */}\n\n        <Button className='button' onClick={() => handleSubmit()}>Save Settings</Button>\n        <Button className='button' id='delete' onClick={() => props.deleteUser()}>Delete Account</Button>\n      </div>\n  );\n}\n\n\nAcadSettings.propTypes = {\n  updateSettings: PropTypes.func.isRequired,\n  setMatriculationYearOptions: PropTypes.func.isRequired,\n  setTargetGradYearOptions: PropTypes.func.isRequired,\n  deleteUser: PropTypes.func.isRequired,\n  modplan: PropTypes.object.isRequired,\n  settings: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  modplan: state.modplan.selectedModules,\n  settings: state.settings,\n  userInfo: state.settings.userInfo\n});\n\nexport default connect(mapStateToProps, \n  { updateSettings, setMatriculationYearOptions, setTargetGradYearOptions, deleteUser }) (AcadSettings);\n"]},"metadata":{},"sourceType":"module"}