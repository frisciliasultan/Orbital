{"ast":null,"code":"var _jsxFileName = \"/Users/frisciliasultan/Documents/Orbitalhosting/src/Pages/Module Planner Page/ModulePlannerPage.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport Board from './Board';\nimport Rules from './Rules';\nimport TrashBox from './TrashBox';\nimport './plannertemp.css';\nimport { Button, Card } from 'react-bootstrap';\nimport { Alert } from \"antd\";\nimport { HTML5Backend as Backend } from 'react-dnd-html5-backend';\nimport { DndProvider } from 'react-dnd';\nimport { connect } from 'react-redux';\nimport { callBackendAPI, setCallBackendNow, setSelectedModules } from '../../actions/modplanActions';\nimport { updateSettings, initialSettings } from \"../../actions/settingsActions\";\nimport { removeSuccess } from \"../../actions/successActions\";\nimport { handleSaveClick, generateObject } from \"../../utils/commonFunctions\";\nimport PropTypes from 'prop-types';\nimport isEmpty from 'is-empty';\nimport LoadingDots from '../Loading Page/LoadingPage';\n\nconst ModulePlannerPageTemp = props => {\n  console.log(props);\n  const module = props.modplan.modules;\n  const [noOfYear, setNoOfYear] = useState(4);\n  useEffect(() => {\n    if (isEmpty(props.modplan.rules)) {\n      props.callBackendAPI('Rules', \"r_ulr\", \"r_cs_degree\");\n    }\n\n    if (isEmpty(props.modplan.modules)) {\n      props.callBackendAPI('NUSMods');\n    }\n  }, []);\n  useEffect(() => {\n    if (!isEmpty(props.settings.userInfo.modPlan) && isEmpty(props.modplan.selectedModules)) {\n      console.log(props.modplan.selectedModules);\n      props.setSelectedModules(null, props.settings.userInfo.modPlan);\n    }\n  }, [props.settings.userInfo]); // useEffect(() => {\n  //     if(!isEmpty(props.settings.userInfo)) {\n  //         const start = props.settings.userInfo.matriculationYear.substr(0, 4);\n  //         const end = props.settings.userInfo.targetGradYear.substr(5, 4);\n  //         const noOfYear = end - start;\n  //         setNoOfYear(noOfYear);\n  //     }\n  // }, [props.settings.userInfo.matriculationYear, props.settings.userInfo.targetGradYear])\n\n  const handleEvalButtonClick = () => {\n    const modules = props.modplan.selectedModules;\n\n    if (isEmpty(modules)) {\n      alert('Please add modules before evaluating');\n    } else {\n      props.setCallBackendNow(true);\n    }\n  };\n\n  return isEmpty(props.settings.userInfo) ? /*#__PURE__*/React.createElement(LoadingDots, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 15\n    }\n  }) : /*#__PURE__*/React.createElement(DndProvider, {\n    backend: Backend,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-module-planner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, !isEmpty(props.settings.userInfo.matriculationYear) && generateObject(props.settings.userInfo.matriculationYear, props.settings.userInfo.targetGradYear, \"yearDisplay\", module), /*#__PURE__*/React.createElement(TrashBox, {\n    module: module,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: \"button\",\n    id: \"eval-button\",\n    onClick: () => handleEvalButtonClick(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 21\n    }\n  }, \"Evaluate\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: \"button\",\n    onClick: () => handleSaveClick(props),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  }, \"Save\"), !isEmpty(props.success) && /*#__PURE__*/React.createElement(Alert, {\n    message: props.success,\n    type: \"success\",\n    showIcon: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  }), !isEmpty(props.success) && setTimeout(props.removeSuccess, 500) && clearTimeout(setTimeout(props.removeSuccess, 2000)), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 21\n    }\n  }, \"Click on each requirement for further information\"), /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Rules, {\n    rules: props.modplan.rules,\n    settings: props.settings,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  })));\n};\n\nModulePlannerPageTemp.propTypes = {\n  callBackendAPI: PropTypes.func.isRequired,\n  setCallBackendNow: PropTypes.func.isRequired,\n  updateSettings: PropTypes.func.isRequired,\n  removeSuccess: PropTypes.func.isRequired,\n  handleSaveClick: PropTypes.func.isRequired,\n  modplan: PropTypes.object.isRequired,\n  settings: PropTypes.object.isRequired,\n  cap: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  settings: state.settings,\n  cap: state.cap,\n  modplan: state.modplan,\n  success: state.success\n});\n\nexport default connect(mapStateToProps, {\n  callBackendAPI,\n  setCallBackendNow,\n  updateSettings,\n  initialSettings,\n  setSelectedModules,\n  removeSuccess\n})(ModulePlannerPageTemp);","map":{"version":3,"sources":["/Users/frisciliasultan/Documents/Orbitalhosting/src/Pages/Module Planner Page/ModulePlannerPage.jsx"],"names":["React","useEffect","useState","Board","Rules","TrashBox","Button","Card","Alert","HTML5Backend","Backend","DndProvider","connect","callBackendAPI","setCallBackendNow","setSelectedModules","updateSettings","initialSettings","removeSuccess","handleSaveClick","generateObject","PropTypes","isEmpty","LoadingDots","ModulePlannerPageTemp","props","console","log","module","modplan","modules","noOfYear","setNoOfYear","rules","settings","userInfo","modPlan","selectedModules","handleEvalButtonClick","alert","matriculationYear","targetGradYear","success","setTimeout","clearTimeout","propTypes","func","isRequired","object","cap","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Board from './Board';\nimport Rules from './Rules';\nimport TrashBox from './TrashBox';\nimport './plannertemp.css';\nimport { Button, Card } from 'react-bootstrap';\nimport { Alert } from \"antd\";\nimport { HTML5Backend as Backend } from 'react-dnd-html5-backend';\nimport { DndProvider } from 'react-dnd';\nimport { connect } from 'react-redux';\nimport { callBackendAPI, setCallBackendNow, setSelectedModules } from '../../actions/modplanActions';\nimport { updateSettings, initialSettings } from \"../../actions/settingsActions\";\nimport { removeSuccess } from \"../../actions/successActions\";\nimport { handleSaveClick, generateObject } from \"../../utils/commonFunctions\";\nimport PropTypes from 'prop-types';\nimport isEmpty from 'is-empty'\nimport LoadingDots from '../Loading Page/LoadingPage';\n\n\nconst ModulePlannerPageTemp = (props) => {\n    console.log(props)\n    const module = props.modplan.modules;\n    const [noOfYear, setNoOfYear] = useState(4);\n\n    useEffect(() => {\n        if(isEmpty(props.modplan.rules)) {\n            props.callBackendAPI('Rules', \"r_ulr\", \"r_cs_degree\");\n        }\n        \n        if(isEmpty(props.modplan.modules)){\n            props.callBackendAPI('NUSMods');\n        } \n    }, [])\n\n    useEffect(() => {\n            if(!isEmpty(props.settings.userInfo.modPlan) && isEmpty(props.modplan.selectedModules)) {\n                console.log(props.modplan.selectedModules)\n                props.setSelectedModules(null, props.settings.userInfo.modPlan)\n            }\n    }, [props.settings.userInfo])\n\n    // useEffect(() => {\n    //     if(!isEmpty(props.settings.userInfo)) {\n    //         const start = props.settings.userInfo.matriculationYear.substr(0, 4);\n    //         const end = props.settings.userInfo.targetGradYear.substr(5, 4);\n    //         const noOfYear = end - start;\n    //         setNoOfYear(noOfYear);\n    //     }\n\n    // }, [props.settings.userInfo.matriculationYear, props.settings.userInfo.targetGradYear])\n\n    const handleEvalButtonClick = () => {\n        const modules = props.modplan.selectedModules;\n        if (isEmpty(modules)) {\n            alert('Please add modules before evaluating');\n        } else {\n            props.setCallBackendNow(true);\n        }\n    }\n\n    return (\n        isEmpty(props.settings.userInfo) \n            ? <LoadingDots/>\n            : (<DndProvider backend={Backend} >\n                <div className=\"container-module-planner\">\n                    {!isEmpty(props.settings.userInfo.matriculationYear) \n                        && generateObject(props.settings.userInfo.matriculationYear, \n                                props.settings.userInfo.targetGradYear, \n                                \"yearDisplay\",\n                                module\n                                )}\n                    \n                    <TrashBox\n                            module={module}/>\n    \n    \n                    <br/>\n    \n                    <Button className=\"button\" id=\"eval-button\" onClick={() => handleEvalButtonClick()}>Evaluate</Button>\n                    <br/>\n    \n                    <Button className=\"button\" onClick={() => handleSaveClick(props)} >Save</Button>\n                    {!isEmpty(props.success) && \n                        <Alert message={props.success} type=\"success\" showIcon />\n                    }\n                    \n                    {!isEmpty(props.success) && \n                        setTimeout(props.removeSuccess, 500) &&\n                        clearTimeout(setTimeout(props.removeSuccess, 2000))}\n    \n                    <br/>\n                    <br/>\n                    <p>Click on each requirement for further information</p>\n                    <Card>\n                        <Rules\n                            rules={props.modplan.rules}\n                            settings={props.settings}/>\n                    </Card>\n                    <br/>\n                </div>\n            </DndProvider>)\n    )\n}\n\nModulePlannerPageTemp.propTypes = {\n    callBackendAPI: PropTypes.func.isRequired,\n    setCallBackendNow: PropTypes.func.isRequired,\n    updateSettings: PropTypes.func.isRequired,\n    removeSuccess: PropTypes.func.isRequired,\n    handleSaveClick: PropTypes.func.isRequired,\n    \n    modplan: PropTypes.object.isRequired,\n    settings: PropTypes.object.isRequired,\n    cap: PropTypes.object.isRequired\n}\n\nconst mapStateToProps = state => ({\n    settings: state.settings,\n    cap: state.cap,\n    modplan: state.modplan,\n    success: state.success,\n});\n\nexport default connect(mapStateToProps, \n                    { callBackendAPI, setCallBackendNow, updateSettings, initialSettings, setSelectedModules, removeSuccess }) \n                    (ModulePlannerPageTemp);\n"]},"metadata":{},"sourceType":"module"}