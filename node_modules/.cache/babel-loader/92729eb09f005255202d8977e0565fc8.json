{"ast":null,"code":"var _jsxFileName = \"/Users/frisciliasultan/Documents/Orbital/client/src/Pages/Module Planner Page/Subrules.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { Card, Spinner } from \"react-bootstrap\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { setCallBackendNow } from \"../../actions/modplanActions\";\n\nfunction Subrules(props) {\n  const [isLoading, setIsLoading] = useState(false);\n  const [isRuleFulfilled, setIsRuleFulfilled] = useState();\n  const [isBackendCalled, setIsBackendCalled] = useState(false);\n  const [isOpen, setIsOpen] = useState(false);\n  const modules = props.modplan.selectedModules ? props.modplan.selectedModules.map(object => object.moduleCode) : null;\n  useEffect(() => {\n    const callBackendFunc = async ruleTag => {\n      try {\n        const link = \"http://172.19.162.53:3000/eval/\";\n        const requestOptions = {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'accept': 'application/json'\n          },\n          body: JSON.stringify({\n            plan: {\n              modules: modules\n            },\n            tag: props.ruleTag\n          })\n        };\n        setIsLoading(true);\n        const response = await fetch(link, requestOptions);\n        const status = await response.json();\n\n        if (!response.ok) {\n          throw new Error(\"An error has occurred\");\n        } else {\n          setIsRuleFulfilled(status);\n          setIsLoading(false);\n          setIsBackendCalled(true);\n        }\n      } catch (error) {\n        setIsLoading(false);\n        console.error('There was an error!', error);\n      }\n\n      ;\n    };\n\n    if (props.modplan.callBackendNow) {\n      callBackendFunc(props.ruleTag);\n      props.setCallBackendNow(false);\n    }\n  }, [props.modplan.callBackendNow]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card.Title, {\n    onClick: () => setIsOpen(!isOpen),\n    style: {\n      color: isBackendCalled ? isRuleFulfilled ? 'green' : 'red' : 'black',\n      cursor: pointer\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, props.ruleName), isLoading && /*#__PURE__*/React.createElement(Spinner, {\n    animation: \"border\",\n    variant: \"success\",\n    role: \"status\",\n    as: \"span\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sr-only\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, \"Loading...\")), isOpen && /*#__PURE__*/React.createElement(Card.Subtitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 24\n    }\n  }, props.ruleDesc));\n}\n\nSubrules.propTypes = {\n  setCallBackendNow: PropTypes.func.isRequired,\n  modplan: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  modplan: state.modplan\n});\n\nexport default connect(mapStateToProps, {\n  setCallBackendNow\n})(Subrules);","map":{"version":3,"sources":["/Users/frisciliasultan/Documents/Orbital/client/src/Pages/Module Planner Page/Subrules.jsx"],"names":["React","useState","useEffect","Card","Spinner","PropTypes","connect","setCallBackendNow","Subrules","props","isLoading","setIsLoading","isRuleFulfilled","setIsRuleFulfilled","isBackendCalled","setIsBackendCalled","isOpen","setIsOpen","modules","modplan","selectedModules","map","object","moduleCode","callBackendFunc","ruleTag","link","requestOptions","method","headers","body","JSON","stringify","plan","tag","response","fetch","status","json","ok","Error","error","console","callBackendNow","color","cursor","pointer","ruleName","ruleDesc","propTypes","func","isRequired","mapStateToProps","state"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,IAAT,EAAeC,OAAf,QAA8B,iBAA9B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,iBAAT,QAAkC,8BAAlC;;AAEA,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;AACrB,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BV,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACW,eAAD,EAAkBC,kBAAlB,IAAwCZ,QAAQ,EAAtD;AACA,QAAM,CAACa,eAAD,EAAkBC,kBAAlB,IAAwCd,QAAQ,CAAC,KAAD,CAAtD;AACA,QAAM,CAACe,MAAD,EAASC,SAAT,IAAsBhB,QAAQ,CAAC,KAAD,CAApC;AACA,QAAMiB,OAAO,GAAGT,KAAK,CAACU,OAAN,CAAcC,eAAd,GAAgCX,KAAK,CAACU,OAAN,CAAcC,eAAd,CAA8BC,GAA9B,CAAmCC,MAAD,IAAYA,MAAM,CAACC,UAArD,CAAhC,GAAmG,IAAnH;AAEArB,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMsB,eAAe,GAAG,MAAOC,OAAP,IAAmB;AACvC,UAAG;AACC,cAAMC,IAAI,GAAG,iCAAb;AACA,cAAMC,cAAc,GAAG;AACnBC,UAAAA,MAAM,EAAE,MADW;AAEnBC,UAAAA,OAAO,EAAE;AAAE,4BAAgB,kBAAlB;AACG,sBAAU;AADb,WAFU;AAKnBC,UAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEC,YAAAA,IAAI,EAAE;AAACf,cAAAA,OAAO,EAAEA;AAAV,aAAR;AACEgB,YAAAA,GAAG,EAAEzB,KAAK,CAACgB;AADb,WAAf;AALa,SAAvB;AASAd,QAAAA,YAAY,CAAC,IAAD,CAAZ;AAGA,cAAMwB,QAAQ,GAAG,MAAMC,KAAK,CAACV,IAAD,EAAOC,cAAP,CAA5B;AACA,cAAMU,MAAM,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAArB;;AAEA,YAAG,CAACH,QAAQ,CAACI,EAAb,EAAiB;AACb,gBAAM,IAAIC,KAAJ,CAAU,uBAAV,CAAN;AACH,SAFD,MAEO;AACH3B,UAAAA,kBAAkB,CAACwB,MAAD,CAAlB;AACA1B,UAAAA,YAAY,CAAC,KAAD,CAAZ;AACAI,UAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACH;AAEJ,OAzBD,CAyBE,OAAM0B,KAAN,EAAa;AACD9B,QAAAA,YAAY,CAAC,KAAD,CAAZ;AACA+B,QAAAA,OAAO,CAACD,KAAR,CAAc,qBAAd,EAAqCA,KAArC;AACD;;AAAA;AAChB,KA9BD;;AAgCA,QAAGhC,KAAK,CAACU,OAAN,CAAcwB,cAAjB,EAAiC;AACzBnB,MAAAA,eAAe,CAACf,KAAK,CAACgB,OAAP,CAAf;AACAhB,MAAAA,KAAK,CAACF,iBAAN,CAAwB,KAAxB;AACP;AAEJ,GAtCQ,EAsCN,CAACE,KAAK,CAACU,OAAN,CAAcwB,cAAf,CAtCM,CAAT;AAwCA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD,CAAM,KAAN;AAAY,IAAA,OAAO,EAAE,MAAM1B,SAAS,CAAC,CAACD,MAAF,CAApC;AACY,IAAA,KAAK,EAAE;AAAC4B,MAAAA,KAAK,EAAE9B,eAAe,GAAIF,eAAe,GAAG,OAAH,GAAa,KAAhC,GAAyC,OAAhE;AAAyEiC,MAAAA,MAAM,EAAEC;AAAjF,KADnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAC+GrC,KAAK,CAACsC,QADrH,CADJ,EAGKrC,SAAS,iBAAI,oBAAC,OAAD;AAAS,IAAA,SAAS,EAAC,QAAnB;AAA4B,IAAA,OAAO,EAAC,SAApC;AAA8C,IAAA,IAAI,EAAC,QAAnD;AAA4D,IAAA,EAAE,EAAC,MAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACV;AAAM,IAAA,SAAS,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADU,CAHlB,EAMKM,MAAM,iBAAI,oBAAC,IAAD,CAAM,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAgBP,KAAK,CAACuC,QAAtB,CANf,CADJ;AAYH;;AAEDxC,QAAQ,CAACyC,SAAT,GAAqB;AACjB1C,EAAAA,iBAAiB,EAAEF,SAAS,CAAC6C,IAAV,CAAeC,UADjB;AAEjBhC,EAAAA,OAAO,EAAEd,SAAS,CAACiB,MAAV,CAAiB6B;AAFT,CAArB;;AAKA,MAAMC,eAAe,GAAGC,KAAK,KAAK;AAC9BlC,EAAAA,OAAO,EAAEkC,KAAK,CAAClC;AADe,CAAL,CAA7B;;AAIA,eAAeb,OAAO,CAAC8C,eAAD,EAAkB;AAAE7C,EAAAA;AAAF,CAAlB,CAAP,CAAiDC,QAAjD,CAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Card, Spinner } from \"react-bootstrap\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { setCallBackendNow } from \"../../actions/modplanActions\";\n\nfunction Subrules(props) {\n    const [isLoading, setIsLoading] = useState(false);\n    const [isRuleFulfilled, setIsRuleFulfilled] = useState();\n    const [isBackendCalled, setIsBackendCalled] = useState(false);\n    const [isOpen, setIsOpen] = useState(false);\n    const modules = props.modplan.selectedModules ? props.modplan.selectedModules.map((object) => object.moduleCode) : null;\n\n    useEffect(() => {\n        const callBackendFunc = async (ruleTag) => {\n            try{\n                const link = \"http://172.19.162.53:3000/eval/\";\n                const requestOptions = {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json',\n                                'accept': 'application/json'            \n                    },\n                    body: JSON.stringify({ plan: {modules: modules},\n                                           tag: props.ruleTag\n                                        })\n                };\n                setIsLoading(true);\n                \n                \n                const response = await fetch(link, requestOptions);\n                const status = await response.json();\n\n                if(!response.ok) {\n                    throw new Error(\"An error has occurred\")\n                } else {\n                    setIsRuleFulfilled(status);\n                    setIsLoading(false);\n                    setIsBackendCalled(true);\n                }\n\n            } catch(error) {\n                          setIsLoading(false);\n                          console.error('There was an error!', error);\n                        };\n        };\n\n        if(props.modplan.callBackendNow) {\n                callBackendFunc(props.ruleTag);\n                props.setCallBackendNow(false);\n        } \n        \n    }, [props.modplan.callBackendNow]);\n\n    return (    \n        <div>\n            <Card.Title onClick={() => setIsOpen(!isOpen)}\n                        style={{color: isBackendCalled ? (isRuleFulfilled ? 'green' : 'red') : 'black', cursor: pointer}}>{props.ruleName}</Card.Title>\n            {isLoading && <Spinner animation=\"border\" variant=\"success\" role=\"status\" as=\"span\">\n                <span className=\"sr-only\">Loading...</span>\n            </Spinner>}\n            {isOpen && <Card.Subtitle>{props.ruleDesc}</Card.Subtitle>}\n            \n        </div>\n    )\n\n}\n\nSubrules.propTypes = {\n    setCallBackendNow: PropTypes.func.isRequired,\n    modplan: PropTypes.object.isRequired\n}\n\nconst mapStateToProps = state => ({\n    modplan: state.modplan\n});\n\nexport default connect(mapStateToProps, { setCallBackendNow }) (Subrules);"]},"metadata":{},"sourceType":"module"}