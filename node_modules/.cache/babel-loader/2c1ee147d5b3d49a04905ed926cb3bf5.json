{"ast":null,"code":"var _jsxFileName = \"/Users/frisciliasultan/Documents/Orbital/client/src/App.js\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\nimport React, { useEffect } from \"react\";\nimport { ModuleSelectionPage } from \"./Pages/Module Selection Page/ModuleSelectionPage\";\nimport { LoginPage } from './Pages/Login/LoginPage';\nimport \"./login.css\";\nimport { Switch, Route } from \"react-router-dom\";\nimport { PrivateNav } from './Components/Navbar/PrivateNav';\nimport { PublicNav } from './Components/Navbar/PublicNav';\nimport ModulePlannerPageTemp from \"./Pages/Module Planner Page/ModulePlannerPage\";\nimport CAPCalculatorPage from \"./Pages/CAP Calculator Page/CAPCalculatorPage\";\nimport AcadSettings from './Settings/AcadSettings';\nimport PrivateRoute from './Components/PrivateRoute';\nimport jwt_decode from \"jwt-decode\";\nimport setAuthToken from \"./utils/setAuthToken\";\nimport { setCurrentUser, logoutUser } from \"./actions/authActions\";\nimport { initialSettings, setCurrentSemester } from \"./actions/settingsActions\";\nimport PrivateRouteTemp from \"./Components/PrivateRoute\";\nimport Dashboard from \"./Components/dashboard/Dashboard\";\nimport ServerError from './Pages/Error Page/ServerError';\nimport store from './store';\nimport { connect } from 'react-redux';\nlet totalGEMMCs = 0; // Check for token to keep user logged in\n\nif (localStorage.jwtToken) {\n  // Set auth token header auth\n  const token = localStorage.jwtToken;\n  setAuthToken(token); // Decode token and get user info and exp\n\n  const decoded = jwt_decode(token); // Set user and isAuthenticated\n\n  store.dispatch(setCurrentUser(decoded, false)); // Set current AY and semester\n\n  const time = new Date();\n  const month = time.getMonth() + 1;\n  const year = time.getFullYear();\n  const isSem2 = month <= 7;\n  let currentSemester;\n  let currentAY;\n\n  if (isSem2) {\n    currentAY = `${year - 1}/${year}`;\n    currentSemester = \"Semester 2\";\n  } else {\n    currentAY = `${year}/${year + 1}`;\n    currentSemester = \"Semester 1\";\n  }\n\n  store.dispatch(setCurrentSemester(currentAY, currentSemester)); // Set user academic info \n\n  store.dispatch(initialSettings()); // Check for expired token\n\n  const currentTime = Date.now() / 1000; // to get in milliseconds\n\n  if (decoded.exp < currentTime) {\n    // Logout user\n    store.dispatch(logoutUser()); // Redirect to login\n\n    window.location.href = \"./login\";\n  }\n}\n\nconst App = props => {\n  // useEffect(() => {\n  //   return () => {\n  //   };\n  // }, [input])\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, props.isAuthenticated ? /*#__PURE__*/React.createElement(PrivateNav, {\n    class: \"navbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 36\n    }\n  }) : /*#__PURE__*/React.createElement(PublicNav, {\n    class: \"navbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 68\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    component: LoginPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/login\",\n    component: LoginPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(PrivateRouteTemp, {\n    exact: true,\n    path: \"/dashboard\",\n    component: Dashboard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(PrivateRouteTemp, {\n    exact: true,\n    path: \"/select-modules\",\n    component: ModuleSelectionPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(PrivateRouteTemp, {\n    exact: true,\n    path: \"/module-planner\",\n    component: ModulePlannerPageTemp,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(PrivateRouteTemp, {\n    exact: true,\n    path: \"/cap-calculator\",\n    component: CAPCalculatorPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(PrivateRouteTemp, {\n    exact: true,\n    path: \"/settings/academics\",\n    component: AcadSettings,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/500-error\",\n    component: ServerError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    component: () => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"display-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 64\n      }\n    }, \"404 NOT FOUND\")),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  })));\n};\n\nconst mapStateToProps = state => ({\n  isAuthenticated: state.auth.isAuthenticated\n});\n\nexport default connect(mapStateToProps)(App);","map":{"version":3,"sources":["/Users/frisciliasultan/Documents/Orbital/client/src/App.js"],"names":["React","useEffect","ModuleSelectionPage","LoginPage","Switch","Route","PrivateNav","PublicNav","ModulePlannerPageTemp","CAPCalculatorPage","AcadSettings","PrivateRoute","jwt_decode","setAuthToken","setCurrentUser","logoutUser","initialSettings","setCurrentSemester","PrivateRouteTemp","Dashboard","ServerError","store","connect","totalGEMMCs","localStorage","jwtToken","token","decoded","dispatch","time","Date","month","getMonth","year","getFullYear","isSem2","currentSemester","currentAY","currentTime","now","exp","window","location","href","App","props","isAuthenticated","mapStateToProps","state","auth"],"mappings":"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","sourcesContent":["import 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\nimport React, { useEffect } from \"react\";\nimport { ModuleSelectionPage } from \"./Pages/Module Selection Page/ModuleSelectionPage\"\nimport { LoginPage } from './Pages/Login/LoginPage'\nimport \"./login.css\";\nimport {\n  Switch,\n  Route,\n} from \"react-router-dom\";\n\nimport { PrivateNav } from './Components/Navbar/PrivateNav';\nimport { PublicNav } from './Components/Navbar/PublicNav';\nimport  ModulePlannerPageTemp  from \"./Pages/Module Planner Page/ModulePlannerPage\";\nimport  CAPCalculatorPage  from \"./Pages/CAP Calculator Page/CAPCalculatorPage\";\nimport AcadSettings from './Settings/AcadSettings';\n\nimport PrivateRoute from './Components/PrivateRoute';\nimport jwt_decode from \"jwt-decode\";\nimport setAuthToken from \"./utils/setAuthToken\";\nimport { setCurrentUser, logoutUser } from \"./actions/authActions\";\nimport { initialSettings, setCurrentSemester } from \"./actions/settingsActions\";\n\nimport PrivateRouteTemp from \"./Components/PrivateRoute\";\nimport Dashboard from \"./Components/dashboard/Dashboard\";\n\nimport ServerError from './Pages/Error Page/ServerError';\n\nimport store from './store';\nimport { connect } from 'react-redux';\n\n\nlet totalGEMMCs = 0;\n\n// Check for token to keep user logged in\nif (localStorage.jwtToken) {\n  // Set auth token header auth\n  const token = localStorage.jwtToken;\n  setAuthToken(token);\n\n  // Decode token and get user info and exp\n  const decoded = jwt_decode(token);\n\n  // Set user and isAuthenticated\n  store.dispatch(setCurrentUser(decoded, false));\n\n    \n\n    // Set current AY and semester\n    const time = new Date();\n    const month = time.getMonth() + 1;\n    const year = time.getFullYear();\n    const isSem2 = (month <= 7);\n    let currentSemester;\n    let currentAY;\n\n    if(isSem2) {\n        currentAY = `${year - 1}/${year}`\n        currentSemester = \"Semester 2\"\n    } else {\n        currentAY = `${year}/${year + 1}`\n        currentSemester = \"Semester 1\"\n    }\n    store.dispatch(setCurrentSemester(currentAY, currentSemester));\n\n    // Set user academic info \n    store.dispatch(initialSettings());\n    \n  // Check for expired token\n  const currentTime = Date.now() / 1000; // to get in milliseconds\n  if (decoded.exp < currentTime) {\n    // Logout user\n    store.dispatch(logoutUser());\n    // Redirect to login\n    window.location.href = \"./login\";\n  }\n}\n\nconst App = (props) => {\n  // useEffect(() => {\n  //   return () => {\n      \n  //   };\n  // }, [input])\n\n\n       return (\n        <div>\n          {props.isAuthenticated ? <PrivateNav class=\"navbar\" /> : <PublicNav class=\"navbar\" />}\n        \n          <Switch>\n          <Route exact path=\"/\" component={LoginPage} />\n          <Route exact path=\"/login\" component={LoginPage} />\n            <PrivateRouteTemp \n              exact path=\"/dashboard\" \n              component={Dashboard} />\n\n            <PrivateRouteTemp \n                exact path=\"/select-modules\" \n                component={ModuleSelectionPage} />\n\n            <PrivateRouteTemp \n                exact path=\"/module-planner\" \n                component={ModulePlannerPageTemp} />\n\n            <PrivateRouteTemp \n                exact path=\"/cap-calculator\" \n                component={CAPCalculatorPage} /> \n\n            <PrivateRouteTemp \n                exact path=\"/settings/academics\" \n                component={AcadSettings} /> \n\n            <Route exact path=\"/500-error\" component={ServerError}/>\n            <Route component={() => <div className=\"display-2\"><strong>404 NOT FOUND</strong></div>}/>\n            \n          </Switch>\n\n           </div>\n\n   );\n\n}\n\nconst mapStateToProps = state => ({\n  isAuthenticated: state.auth.isAuthenticated\n})\n\nexport default connect(mapStateToProps)(App);\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}