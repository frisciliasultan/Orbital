{"ast":null,"code":"var _jsxFileName = \"/Users/frisciliasultan/Documents/Orbital/client/src/Pages/Module Planner Page/ModulePlannerPage.jsx\";\nimport React from 'react';\nimport Board from './Board';\nimport Rules from './Rules';\nimport TrashBox from './TrashBox';\nimport YearDisplay from './YearDisplay';\nimport './plannertemp.css';\nimport { Button, Card } from 'react-bootstrap';\nimport { HTML5Backend as Backend } from 'react-dnd-html5-backend';\nimport { DndProvider } from 'react-dnd';\nimport { connect } from 'react-redux';\nimport { callBackendAPI } from '../../actions/modplanActions';\nimport PropTypes from 'prop-types';\n\nclass ModulePlannerPageTemp extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.callBackendAPI = backend => {\n      let link = backend === 'NUSMods' ? 'https://api.nusmods.com/v2/2018-2019/moduleInfo.json' : 'http://172.19.162.53:3000/rules/r_cs_degree';\n      return fetch(link, {\n        'accept': 'application/json',\n        'content-type': 'application/json'\n      }).then(response => response.json()).then(res => res);\n    };\n\n    this.state = {\n      selectedModules: null,\n      callBackendNow: false,\n      rules: []\n    };\n    this.updateSelectedModules = this.updateSelectedModules.bind(this);\n    this.updateModuleLocation = this.updateModuleLocation.bind(this);\n    this.updateCallBackendNow = this.updateCallBackendNow.bind(this);\n  }\n\n  componentDidMount() {\n    // Call our fetch function below once the component mounts\n    this.callBackendAPI('NUSMods').then(res => this.setState({\n      module: res\n    })).catch(err => console.log(err)); // this.callBackendAPI('Rules')\n    //     .then(res => this.setState({ rules : res }))\n    //     .catch(err => console.log(err));\n\n    this.props.callBackendAPI();\n  } // Fetches our GET route from the Express server. (Note the route we are fetching matches the GET route from server.js\n\n\n  updateSelectedModules(object) {\n    let newSelectedModules = this.state.selectedModules ? this.state.selectedModules : [];\n    let unique = true;\n    let indexOfDuplicate;\n\n    for (let i = 0; i < newSelectedModules.length; i++) {\n      if (newSelectedModules[i].moduleCode === object.moduleCode) {\n        unique = false;\n        indexOfDuplicate = i;\n      }\n    }\n\n    if (!newSelectedModules.includes(object) && unique) {\n      if (unique) {\n        newSelectedModules.push(object);\n      } else {\n        newSelectedModules.splice(indexOfDuplicate, 1);\n        newSelectedModules.push(object);\n      }\n\n      this.setState({\n        selectedModules: newSelectedModules\n      });\n    }\n\n    console.log(this.state.selectedModules);\n  }\n\n  updateModuleLocation(item, location) {\n    let changedModule;\n\n    if (!location) {\n      changedModule = this.state.selectedModules.filter(object => object.moduleCode !== item.id);\n    } else {\n      const moduleToChange = this.state.selectedModules.filter(object => object.moduleCode === item.id);\n      moduleToChange[0].location = location;\n      changedModule = this.state.selectedModules.filter(object => object.moduleCode !== item.id).concat(moduleToChange[0]);\n    }\n\n    this.setState({\n      selectedModules: changedModule\n    });\n    console.log(changedModule);\n  }\n\n  updateCallBackendNow() {\n    // this.setState({callBackendNow: false});\n    this.props.setCallBackendNow(false);\n  }\n\n  handleEvalButtonClick() {\n    const modules = this.state.selectedModules;\n\n    if (!modules || modules === []) {\n      alert('Please add modules before evaluating');\n    } else {\n      this.setState({\n        callBackendNow: true\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(DndProvider, {\n      backend: Backend,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-module-planner\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(YearDisplay, {\n      year: \"Year 1\",\n      updateSelectedModules: this.updateSelectedModules,\n      selectedModules: this.state.selectedModules,\n      updateModuleLocation: this.updateModuleLocation,\n      module: this.state.module,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(YearDisplay, {\n      year: \"Year 2\",\n      updateSelectedModules: this.updateSelectedModules,\n      selectedModules: this.state.selectedModules,\n      updateModuleLocation: this.updateModuleLocation,\n      module: this.state.module,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(YearDisplay, {\n      year: \"Year 3\",\n      updateSelectedModules: this.updateSelectedModules,\n      selectedModules: this.state.selectedModules,\n      updateModuleLocation: this.updateModuleLocation,\n      module: this.state.module,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(YearDisplay, {\n      year: \"Year 4\",\n      updateSelectedModules: this.updateSelectedModules,\n      selectedModules: this.state.selectedModules,\n      updateModuleLocation: this.updateModuleLocation,\n      module: this.state.module,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(TrashBox, {\n      updateModuleLocation: this.updateModuleLocation,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      className: \"button\",\n      id: \"eval-button\",\n      onClick: () => this.handleEvalButtonClick(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }\n    }, \"Evaluate\"), /*#__PURE__*/React.createElement(Button, {\n      className: \"button\",\n      onClick: () => {},\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 21\n      }\n    }, \"Save\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Rules, {\n      rules: this.state.rules,\n      callBackendNow: this.state.callBackendNow,\n      selectedModules: this.state.selectedModules,\n      updateCallBackendNow: this.updateCallBackendNow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nModulePlannerPageTemp.propTypes = {\n  callBackendAPI: PropTypes.func.isRequired,\n  modplan: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  modplan: state.modplan\n});\n\nexport default connect(mapStateToProps, {\n  callBackendAPI\n})(ModulePlannerPageTemp);","map":{"version":3,"sources":["/Users/frisciliasultan/Documents/Orbital/client/src/Pages/Module Planner Page/ModulePlannerPage.jsx"],"names":["React","Board","Rules","TrashBox","YearDisplay","Button","Card","HTML5Backend","Backend","DndProvider","connect","callBackendAPI","PropTypes","ModulePlannerPageTemp","Component","constructor","props","backend","link","fetch","then","response","json","res","state","selectedModules","callBackendNow","rules","updateSelectedModules","bind","updateModuleLocation","updateCallBackendNow","componentDidMount","setState","module","catch","err","console","log","object","newSelectedModules","unique","indexOfDuplicate","i","length","moduleCode","includes","push","splice","item","location","changedModule","filter","id","moduleToChange","concat","setCallBackendNow","handleEvalButtonClick","modules","alert","render","propTypes","func","isRequired","modplan","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Board from './Board';\nimport Rules from './Rules';\nimport TrashBox from './TrashBox';\nimport YearDisplay from './YearDisplay';\nimport './plannertemp.css';\nimport { Button, Card } from 'react-bootstrap';\nimport { HTML5Backend as Backend } from 'react-dnd-html5-backend';\nimport { DndProvider } from 'react-dnd';\nimport { connect } from 'react-redux';\nimport { callBackendAPI } from '../../actions/modplanActions';\nimport PropTypes from 'prop-types';\n\n\nclass ModulePlannerPageTemp extends React.Component {\n   constructor(props) {\n       super(props);\n       this.state = {   selectedModules: null,\n                        callBackendNow: false,\n                        rules: []\n        }\n        this.updateSelectedModules = this.updateSelectedModules.bind(this);\n        this.updateModuleLocation = this.updateModuleLocation.bind(this);\n        this.updateCallBackendNow = this.updateCallBackendNow.bind(this);\n\n    }\n\n    componentDidMount() {\n        // Call our fetch function below once the component mounts\n        this.callBackendAPI('NUSMods')\n            .then(res => this.setState({ module : res }))\n            .catch(err => console.log(err));\n\n        // this.callBackendAPI('Rules')\n        //     .then(res => this.setState({ rules : res }))\n        //     .catch(err => console.log(err));\n        this.props.callBackendAPI();\n\n    }\n    \n      // Fetches our GET route from the Express server. (Note the route we are fetching matches the GET route from server.js\n    callBackendAPI = (backend) => {\n        let link = backend === 'NUSMods' ? 'https://api.nusmods.com/v2/2018-2019/moduleInfo.json' \n                        : 'http://172.19.162.53:3000/rules/r_cs_degree';\n        return fetch(link, {'accept': 'application/json',\n                                             'content-type': 'application/json'})\n        .then(response => response.json()) \n        .then(res => res)\n    }\n\n    updateSelectedModules(object) {\n        let newSelectedModules = this.state.selectedModules ? this.state.selectedModules : [];\n        let unique = true;\n        let indexOfDuplicate;\n        \n        for(let i = 0; i < newSelectedModules.length; i++) {\n            if(newSelectedModules[i].moduleCode === object.moduleCode) {\n                unique = false;\n                indexOfDuplicate = i;\n            }\n        }\n\n         if (!newSelectedModules.includes(object) && unique) {\n             if(unique) {\n                newSelectedModules.push(object);\n                \n             } else {\n                newSelectedModules.splice(indexOfDuplicate, 1);\n                newSelectedModules.push(object);           \n             }\n             this.setState({selectedModules: newSelectedModules});\n        }\n         \n         console.log(this.state.selectedModules);\n     }\n    \n     updateModuleLocation(item, location) {\n         let changedModule;\n         if(!location) {\n             changedModule = this.state.selectedModules.filter((object) => object.moduleCode !== item.id);\n         } else {\n            const moduleToChange = this.state.selectedModules.filter((object) => object.moduleCode === item.id);\n            moduleToChange[0].location =  location;\n            changedModule = this.state.selectedModules.filter((object) => object.moduleCode !== item.id).concat(moduleToChange[0])\n         }\n         this.setState({selectedModules: changedModule});\n        console.log(changedModule);\n    }\n    \n    updateCallBackendNow() {\n        // this.setState({callBackendNow: false});\n        this.props.setCallBackendNow(false);\n    }\n\n    handleEvalButtonClick() {\n        const modules = this.state.selectedModules;\n        if (!modules || modules === []) {\n            alert('Please add modules before evaluating');\n        } else {\n            this.setState({callBackendNow: true})\n        }\n    }\n    \n    render () {\n        return (\n            <DndProvider backend={Backend} >\n                <div className=\"container-module-planner\">\n                    <YearDisplay\n                            year=\"Year 1\"\n                            updateSelectedModules={this.updateSelectedModules}\n                            selectedModules={this.state.selectedModules}\n                            updateModuleLocation={this.updateModuleLocation}\n                            module={this.state.module} />\n\n                    <YearDisplay\n                            year=\"Year 2\"\n                            updateSelectedModules={this.updateSelectedModules}\n                            selectedModules={this.state.selectedModules}\n                            updateModuleLocation={this.updateModuleLocation}\n                            module={this.state.module} /> \n\n                    <YearDisplay\n                            year=\"Year 3\"\n                            updateSelectedModules={this.updateSelectedModules}\n                            selectedModules={this.state.selectedModules}\n                            updateModuleLocation={this.updateModuleLocation}\n                            module={this.state.module} />\n\n                    <YearDisplay\n                            year=\"Year 4\"\n                            updateSelectedModules={this.updateSelectedModules}\n                            selectedModules={this.state.selectedModules}\n                            updateModuleLocation={this.updateModuleLocation}\n                            module={this.state.module} /> \n                    \n                    <TrashBox\n                            updateModuleLocation={this.updateModuleLocation}/>\n\n\n                    <br/>\n\n                    <Button className=\"button\" id=\"eval-button\" onClick={() => this.handleEvalButtonClick()}>Evaluate</Button>\n                    <Button className=\"button\" onClick={() => {}}>Save</Button>\n                    <br/>\n                    <br/>\n                    <Card>\n                        <Rules\n                            rules={this.state.rules}\n                            callBackendNow={this.state.callBackendNow}\n                            selectedModules={this.state.selectedModules}\n                            updateCallBackendNow={this.updateCallBackendNow}/>\n                    </Card>\n                    <br/>\n                </div>\n           </DndProvider>\n        )\n    }\n}\n\nModulePlannerPageTemp.propTypes = {\n    callBackendAPI: PropTypes.func.isRequired,\n    modplan: PropTypes.object.isRequired\n}\n\nconst mapStateToProps = state => ({\n    modplan: state.modplan\n});\n\nexport default connect(mapStateToProps, { callBackendAPI }) (ModulePlannerPageTemp);\n"]},"metadata":{},"sourceType":"module"}