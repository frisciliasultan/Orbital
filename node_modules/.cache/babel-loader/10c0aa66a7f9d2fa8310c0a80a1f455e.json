{"ast":null,"code":"import { SET_USER_SETTINGS, SET_CURRENT_SEMESTER, SET_MATRICULATION_OPTIONS, SET_TARGET_GRAD_OPTIONS, CLEAN_UP_SETTINGS, GET_SUCCESS, SET_FACULTY_AND_RESIDENCE, SET_EDIT_ALL } from \"./types\";\nimport { setUserLoading } from \"./authActions\";\nimport axios from \"axios\";\nexport const setUserSettings = userData => {\n  return {\n    type: SET_USER_SETTINGS,\n    payload: userData\n  };\n};\nexport const initialSettings = () => async dispatch => {\n  try {\n    axios.defaults.timeout = 7000;\n    dispatch(setUserLoading(true));\n    const isFetched = await axios.get('https://modtree-api.netlify.app/.netlify/functions/user/account').then(res => {\n      dispatch(setUserSettings(res.data));\n    }).then(res => {\n      return true;\n    });\n\n    if (isFetched) {\n      dispatch(setUserLoading(false));\n    }\n  } catch (err) {\n    dispatch(setUserLoading(false));\n    console.log(err); // window.location.replace(\"/500-error\")\n  }\n};\nexport const updateSettings = userData => dispatch => {\n  axios.defaults.timeout = 7000;\n  dispatch(setUserLoading(true));\n  axios.put(\"https://modtree-api.netlify.app/.netlify/functions/user/account\", userData).then(res => {\n    dispatch(setUserSettings(res.data.updated));\n  }).then(res => {\n    dispatch({\n      type: GET_SUCCESS,\n      payload: \"Saved successfully!\"\n    });\n    dispatch(setUserLoading(false));\n  }).catch(err => {\n    dispatch(setUserLoading(false));\n    console.log(err); // window.location.replace(\"/500-error\")\n  });\n};\nexport const setCurrentSemester = (currentAY, currentSemester, month) => {\n  return {\n    type: SET_CURRENT_SEMESTER,\n    currentAY,\n    currentSemester,\n    month\n  };\n};\nexport const setMatriculationYearOptions = (currentAY, currentSemester) => {\n  return {\n    type: SET_MATRICULATION_OPTIONS,\n    currentAY,\n    currentSemester\n  };\n};\nexport const setTargetGradYearOptions = (AY, Semester) => {\n  return {\n    type: SET_TARGET_GRAD_OPTIONS,\n    AY,\n    Semester\n  };\n};\nexport const cleanUpSettings = () => {\n  return {\n    type: CLEAN_UP_SETTINGS\n  };\n};\nexport const setDegreeOptions = () => dispatch => {\n  axios.defaults.timeout = 5000;\n  axios.all([axios.get('https://modtree-api.netlify.app/.netlify/functions/info/faculties'), axios.get('https://modtree-api.netlify.app/.netlify/functions/info/residences')]).then(resArr => {\n    dispatch(setFacultyAndResidence(resArr[0].data, resArr[1].data));\n  }).catch(err => {\n    console.log(err);\n  });\n};\nexport const setFacultyAndResidence = (faculties, residences) => {\n  return {\n    type: SET_FACULTY_AND_RESIDENCE,\n    faculties,\n    residences\n  };\n};\nexport const setEditAll = (status, current, category) => {\n  return {\n    type: SET_EDIT_ALL,\n    status,\n    current,\n    category\n  };\n}; //turn array of choices into options dropdown\n// export const generateOptions = (optionList, category,) {\n//     let facIndex = this.state.facIndex;\n//   if(choices === 'faculty'){\n//     return this.state.dummyfac.map((obj) => {\n//       return (\n//       <option value={Object.keys(obj)}>\n//         {Object.keys(obj)}\n//       </option>\n//       );\n//     });\n//   } else if(choices === 'major') {\n//       if(this.state.faculty) {\n//     return this.state.dummyfac\n//            [facIndex]\n//            [this.state.faculty].map((obj) => {\n//                   return (\n//                     <option value={Object.keys(obj)}>\n//                       {Object.keys(obj)}\n//                     </option>\n//                   )\n//               }\n//     )}\n//   } else if(choices === 'specialisation') {\n//       if(this.state.major && this.state.faculty) {\n//       return this.state.dummyfac\n//              [facIndex]\n//              [this.state.faculty][this.state.majorIndex][this.state.major].map((item) => {\n//                   return (\n//                     <option>\n//                       {item}\n//                     </option>\n//                   )\n//                 }    \n//       )}\n//   } else if(choices === 'residence') {\n//     return this.state.residenceOptions.map((obj) => {\n//       return (\n//       <option value={obj}>\n//         {obj}\n//       </option>\n//       );\n//     });\n//   } else {\n//       let options;\n//       if(choices === 'matriculationYear') {\n//         options = this.props.settings.matriculationOptions\n//       } else {\n//         options = this.props.settings.targetGradOptions\n//       }\n//     return options.map((option) => {\n//       return (\n//       <option value={option}>\n//         {option}\n//       </option>\n//       );\n//     });\n//   }\n// }","map":{"version":3,"sources":["/Users/frisciliasultan/Documents/Orbitalhosting/src/actions/settingsActions.js"],"names":["SET_USER_SETTINGS","SET_CURRENT_SEMESTER","SET_MATRICULATION_OPTIONS","SET_TARGET_GRAD_OPTIONS","CLEAN_UP_SETTINGS","GET_SUCCESS","SET_FACULTY_AND_RESIDENCE","SET_EDIT_ALL","setUserLoading","axios","setUserSettings","userData","type","payload","initialSettings","dispatch","defaults","timeout","isFetched","get","then","res","data","err","console","log","updateSettings","put","updated","catch","setCurrentSemester","currentAY","currentSemester","month","setMatriculationYearOptions","setTargetGradYearOptions","AY","Semester","cleanUpSettings","setDegreeOptions","all","resArr","setFacultyAndResidence","faculties","residences","setEditAll","status","current","category"],"mappings":"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,CAAN,CAAUnB,IAA3B,CAAvB,CAAR;AACH,GANL,EAOCO,KAPD,CAOON,GAAG,IAAI;AACVC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,GATD;AAUH,CAZM;AAcP,OAAO,MAAMmB,sBAAsB,GAAG,CAACC,SAAD,EAAYC,UAAZ,KAA2B;AAC7D,SAAO;AACHhC,IAAAA,IAAI,EAAEN,yBADH;AAEHqC,IAAAA,SAFG;AAGHC,IAAAA;AAHG,GAAP;AAKH,CANM;AAQP,OAAO,MAAMC,UAAU,GAAG,CAACC,MAAD,EAASC,OAAT,EAAkBC,QAAlB,KAA+B;AACrD,SAAO;AACHpC,IAAAA,IAAI,EAAEL,YADH;AAEHuC,IAAAA,MAFG;AAGHC,IAAAA,OAHG;AAIHC,IAAAA;AAJG,GAAP;AAMH,CAPM,C,CAQP;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import {\n    SET_USER_SETTINGS,\n    SET_CURRENT_SEMESTER,\n    SET_MATRICULATION_OPTIONS,\n    SET_TARGET_GRAD_OPTIONS,\n    CLEAN_UP_SETTINGS,\n    GET_SUCCESS,\n    SET_FACULTY_AND_RESIDENCE,\n    SET_EDIT_ALL\n} from \"./types\";\nimport { setUserLoading } from \"./authActions\";\nimport axios from \"axios\";\n\nexport const setUserSettings = (userData) => {\n    return {\n        type: SET_USER_SETTINGS,\n        payload: userData\n    }\n}\n\nexport const initialSettings = () => async dispatch => {\n    try {\n        axios.defaults.timeout = 7000;\n        dispatch(setUserLoading(true));\n        \n        const isFetched = await axios  \n                        .get('https://modtree-api.netlify.app/.netlify/functions/user/account')\n                        .then(res => {\n                                dispatch(setUserSettings(res.data))\n                            })\n                        .then(res => {return true})\n        if(isFetched) {\n            dispatch(setUserLoading(false))\n        }\n    }\n    catch (err) {\n            dispatch(setUserLoading(false));\n            console.log(err)\n            // window.location.replace(\"/500-error\")\n        }\n}\n\nexport const updateSettings = (userData) => dispatch => {\n    axios.defaults.timeout = 7000;\n    dispatch(setUserLoading(true))\n    axios\n        .put(\"https://modtree-api.netlify.app/.netlify/functions/user/account\", userData)\n        .then(res => {dispatch(setUserSettings(res.data.updated))})\n        .then(res => {\n            dispatch({\n                        type: GET_SUCCESS,\n                        payload: \"Saved successfully!\"\n            });\n            dispatch(setUserLoading(false))\n            }\n        )\n        .catch(err => {\n                dispatch(setUserLoading(false))\n                console.log(err);\n                // window.location.replace(\"/500-error\")\n            })\n};\n\nexport const setCurrentSemester = (currentAY, currentSemester, month) => {\n    return {\n        type: SET_CURRENT_SEMESTER,\n        currentAY,\n        currentSemester,\n        month\n    }\n}\n\nexport const setMatriculationYearOptions = (currentAY, currentSemester) => {\n    return {\n        type: SET_MATRICULATION_OPTIONS,\n        currentAY,\n        currentSemester\n    }\n}\n\nexport const setTargetGradYearOptions = (AY, Semester) => {\n    return {\n        type: SET_TARGET_GRAD_OPTIONS,\n        AY,\n        Semester\n    }\n}\n\nexport const cleanUpSettings = () => {\n    return { \n        type: CLEAN_UP_SETTINGS\n    }\n}\n\nexport const setDegreeOptions = () => dispatch => {\n    axios.defaults.timeout = 5000;\n    axios.all([\n        axios.get('https://modtree-api.netlify.app/.netlify/functions/info/faculties'),\n        axios.get('https://modtree-api.netlify.app/.netlify/functions/info/residences')\n    ])\n    .then(resArr => {\n            dispatch(setFacultyAndResidence(resArr[0].data, resArr[1].data));\n        }) \n    .catch(err => {\n        console.log(err)\n    });\n}\n\nexport const setFacultyAndResidence = (faculties, residences) => {\n    return {\n        type: SET_FACULTY_AND_RESIDENCE,\n        faculties, \n        residences\n    }\n}\n\nexport const setEditAll = (status, current, category) => {\n    return {\n        type: SET_EDIT_ALL,\n        status,\n        current,\n        category\n    }\n} \n//turn array of choices into options dropdown\n// export const generateOptions = (optionList, category,) {\n\n//     let facIndex = this.state.facIndex;\n//   if(choices === 'faculty'){\n//     return this.state.dummyfac.map((obj) => {\n//       return (\n//       <option value={Object.keys(obj)}>\n//         {Object.keys(obj)}\n//       </option>\n//       );\n//     });\n//   } else if(choices === 'major') {\n//       if(this.state.faculty) {\n//     return this.state.dummyfac\n//            [facIndex]\n//            [this.state.faculty].map((obj) => {\n//                   return (\n//                     <option value={Object.keys(obj)}>\n//                       {Object.keys(obj)}\n//                     </option>\n//                   )\n//               }\n//     )}\n//   } else if(choices === 'specialisation') {\n//       if(this.state.major && this.state.faculty) {\n//       return this.state.dummyfac\n//              [facIndex]\n//              [this.state.faculty][this.state.majorIndex][this.state.major].map((item) => {\n//                   return (\n//                     <option>\n//                       {item}\n//                     </option>\n//                   )\n//                 }    \n//       )}\n//   } else if(choices === 'residence') {\n//     return this.state.residenceOptions.map((obj) => {\n//       return (\n//       <option value={obj}>\n//         {obj}\n//       </option>\n//       );\n//     });\n//   } else {\n//       let options;\n\n//       if(choices === 'matriculationYear') {\n//         options = this.props.settings.matriculationOptions\n//       } else {\n//         options = this.props.settings.targetGradOptions\n//       }\n\n//     return options.map((option) => {\n//       return (\n//       <option value={option}>\n//         {option}\n//       </option>\n//       );\n//     });\n//   }\n// }\n\n\n"]},"metadata":{},"sourceType":"module"}